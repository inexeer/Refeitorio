@model Refeitorio.Models.MenuWeek

@{
    ViewData["Title"] = "Menu Semanal";
    var selectedOption = (ViewBag.SelectedOption as string) ?? "Normal"; // Normal, Vegetariano ou All
    var weeks = ViewBag.Weeks as List<int> ?? new List<int>();
    var weekRanges = ViewBag.WeekRanges as Dictionary<int, string> ?? new Dictionary<int, string>();
    var currentRange = ViewBag.CurrentWeekRange as string ?? "";
    Layout = "../Shared/_LayoutNavbar.cshtml";
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-info">@TempData["Message"]</div>
}

<div class="mb-3">
    <a class="btn btn-outline-primary @(selectedOption == "Normal" ? "active" : "")"
        asp-controller="Menu" asp-action="Index" asp-route-week="@Model.WeekNumber" asp-route-option="Normal">Normal</a>

    <a class="btn btn-outline-primary @(selectedOption == "Vegetariano" ? "active" : "")"
        asp-controller="Menu" asp-action="Index" asp-route-week="@Model.WeekNumber" asp-route-option="Vegetariano">Vegetariano</a>

    <a class="btn btn-outline-secondary @(selectedOption == "All" ? "active" : "")"
        asp-controller="Menu" asp-action="Index" asp-route-week="@Model.WeekNumber" asp-route-option="All">Mostrar ambos</a>
</div>

<ul class="nav nav-tabs mb-3">
    @foreach (var w in weeks)
    {
        var active = w == Model.WeekNumber ? "active" : "";
        var label = weekRanges.ContainsKey(w) ? $"Semana {w} - {weekRanges[w]}" : $"Semana {w}";
        <li class="nav-item">
            <a class="nav-link @active" asp-controller="Menu" asp-action="Index" asp-route-week="@w" asp-route-option="@selectedOption">@label</a>
        </li>
    }
</ul>


